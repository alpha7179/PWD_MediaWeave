> 범례 (Notation):
> 
> - **PK:** Primary Key (기본키)
> - **FK:** Foreign Key (외래키)
> - **||--||** : 1:1 관계
> - **||--o{** : 1:N 관계
> - **}o--o{** : N:M 관계 (중간 테이블로 해소)

```
erDiagram
    %% ---------------------------------------------------------
    %% 1. 사용자 및 계정 (User & Roles)
    %% ---------------------------------------------------------
    USERS {
        INTEGER user_id PK "시스템 고유 ID (Serial)"
        VARCHAR email "로그인 이메일 (Unique)"
        VARCHAR password_hash "암호화된 비밀번호"
        VARCHAR role "권한 (ADMIN, PROFESSOR, STUDENT)"
        BOOLEAN is_active "활성화 여부"
        TIMESTAMP created_at
    }

    PROFESSORS {
        INTEGER professor_id PK "교번/고유ID"
        INTEGER user_id FK "USERS 참조 (1:1)"
        VARCHAR name_ko "이름(한글)"
        VARCHAR name_en "이름(영문)"
        TEXT research_areas "연구 분야"
        VARCHAR email "이메일"
        VARCHAR office "연구실"
    }

    STUDENTS {
        INTEGER student_id PK "학번"
        INTEGER user_id FK "USERS 참조 (1:1)"
        VARCHAR name "이름"
        INTEGER major_id FK "주전공 (Majors)"
        INTEGER track_id FK "주트랙 (Tracks)"
        INTEGER grade_level "학년"
        VARCHAR enrollment_status "학적상태 (재학/휴학 등)"
        INTEGER credits "이수 학점"
        INTEGER gpa "평점"
    }

    %% 관계: 유저는 교수 또는 학생일 수 있음 (1:1)
    USERS ||--o| PROFESSORS : "is_a"
    USERS ||--o| STUDENTS : "is_a"

    %% ---------------------------------------------------------
    %% 2. 학사 정보 기준 (Majors & Tracks)
    %% ---------------------------------------------------------
    MAJORS {
        INTEGER major_id PK
        VARCHAR name "전공명 (디지털미디어, 디지털휴먼 등)"
        VARCHAR type "구분 (심화, 일반, 마이크로)"
        INTEGER total_credits "졸업 이수 학점"
        INTEGER required_credits "필수 이수 학점"
    }

    TRACKS {
        INTEGER track_id PK
        VARCHAR initials "이니셜 (GI, VC, DE...)"
        VARCHAR name_ko "트랙명(한글)"
        VARCHAR name_en "트랙명(영문)"
        TEXT description "트랙 설명"
    }

    %% 관계: 학생은 전공과 트랙에 소속됨
    MAJORS ||--o{ STUDENTS : "belongs_to"
    TRACKS ||--o{ STUDENTS : "selects"

    %% ---------------------------------------------------------
    %% 3. 교과목 (Courses)
    %% ---------------------------------------------------------
    COURSES {
        INTEGER course_id PK "내부 관리 ID"
        VARCHAR course_code "학수번호 (예: CSE200)"
        VARCHAR name_ko "과목명(한글)"
        VARCHAR name_en "과목명(영문)"
        INTEGER credit "학점"
        VARCHAR class_type "수업방식 (Lecture, PBL...)"
        INTEGER grade_level "권장 학년"
        INTEGER semester "개설 학기"
        VARCHAR course_category "이수구분 (전필, 전선...)"
        BOOLEAN is_required "필수 여부"
    }

    %% ---------------------------------------------------------
    %% 4. 교차 엔티티 (Junction Tables for N:M)
    %% ---------------------------------------------------------

    %% 과목 - 교수 (N:M) : 한 과목을 여러 교수가, 한 교수가 여러 과목을
    COURSE_PROFESSORS {
        INTEGER course_id PK, FK
        INTEGER professor_id PK, FK
    }

    %% 과목 - 트랙 (N:M) : 한 과목이 여러 트랙에 인정됨
    COURSE_TRACKS {
        INTEGER course_id PK, FK
        INTEGER track_id PK, FK
    }

    %% 과목 - 전공 (N:M) : 이 과목이 어떤 전공(심화/마이크로)의 필수/선택인지 정의
    COURSE_MAJORS {
        INTEGER course_id PK, FK
        INTEGER major_id PK, FK
        VARCHAR type "이수 구분 (Required/Optional)"
    }

    %% 선수과목 (Self-Referencing N:M)
    COURSE_PREREQUISITES {
        INTEGER course_id PK, FK "본 과목"
        INTEGER pre_course_id PK, FK "선수 과목"
        VARCHAR type "관계 타입 (Required/Recommended)"
    }

    %% 관계 연결
    COURSES ||--|{ COURSE_PROFESSORS : "taught_by"
    PROFESSORS ||--|{ COURSE_PROFESSORS : "teaches"

    COURSES ||--|{ COURSE_TRACKS : "part_of"
    TRACKS ||--|{ COURSE_TRACKS : "contains"

    COURSES ||--|{ COURSE_MAJORS : "required_for"
    MAJORS ||--|{ COURSE_MAJORS : "includes"

    COURSES ||--o{ COURSE_PREREQUISITES : "has_prerequisite"
    COURSES ||--o{ COURSE_PREREQUISITES : "is_prerequisite_for"

```

## 3. 엔티티 상세 정의 (Schema Detail)

### 1. 사용자 및 학적 (Users, Students, Professors)

| 테이블명 | 주요 컬럼 | PK/FK | 설명 |
| --- | --- | --- | --- |
| **Users** | `user_id`, `email`, `role`, `password_hash` | PK: user_id | 모든 계정의 기본 정보 및 인증/권한 관리. |
| **Students** | `student_id`, `user_id`, `name`, `major_id` | PK: student_id

FK: user_id, major_id | 학생 상세 정보. Users와 1:1 관계이며, 전공/트랙을 참조함. |
| **Professors** | `professor_id`, `user_id`, `name_ko` | PK: professor_id

FK: user_id | 교수진 상세 정보. 연구실 위치 및 이메일 포함. |

### 2. 교육 기준 정보 (Majors, Tracks)

| 테이블명 | 주요 컬럼 | PK/FK | 설명 |
| --- | --- | --- | --- |
| **Majors** | `major_id`, `name`, `type` | PK: major_id | 전공 구분(심화/일반/마이크로디그리). 졸업 요건 학점 포함. |
| **Tracks** | `track_id`, `initials`, `name_ko` | PK: track_id | 5대 트랙(GI, VC, DE, CD, MD) 정의. |

### 3. 교과목 정보 (Courses)

| 테이블명 | 주요 컬럼 | PK/FK | 설명 |
| --- | --- | --- | --- |
| **Courses** | `course_id`, `course_code`, `name_ko`, `credit`, `class_type` | PK: course_id | 개설되는 모든 과목의 마스터 데이터. 학수번호, 학점, 개설학기 포함. |

### 4. 관계 매핑 테이블 (Relation Mapping)

복잡한 다대다(N:M) 관계를 해소하기 위해 생성된 테이블들입니다.

| 테이블명 | 관계 (A ↔ B) | 주요 속성 | 비고 |
| --- | --- | --- | --- |
| **Course_Professors** | 과목 ↔ 교수 | `course_id`, `professor_id` | 팀티칭 등을 고려하여 N:M으로 설계됨. |
| **Course_Tracks** | 과목 ↔ 트랙 | `course_id`, `track_id` | 하나의 과목이 여러 트랙의 이수 과목으로 인정될 수 있음. |
| **Course_Majors** | 과목 ↔ 전공 | `type` (Required/Optional) | 마이크로디그리 등 특정 전공에서의 필수/선택 여부 지정. |
| **Course_Prerequisites** | 과목 ↔ 과목 | `type` (Required/Recommended) | **자기 참조 관계.** 선수과목 구조를 트리 형태로 표현 가능하게 함. |

## 4. 설계 특징 및 고려사항

1. **확장성 있는 전공 구조 (Majors)**
    - 단순히 '디지털미디어학과' 하나만 있는 것이 아니라, `심화전공`, `일반전공` 그리고 최근 신설된 `마이크로디그리(디지털휴먼 등)`까지 수용할 수 있도록 `Majors` 테이블을 분리하고 `type`으로 구분했습니다.
2. **유연한 선수과목 시스템 (Prerequisites)**
    - 선수과목이 '필수(Must)'인 경우와 '권장(Recommended)'인 경우를 구분하기 위해 매핑 테이블에 `type` 컬럼을 추가했습니다. 이를 통해 로드맵 UI에서 실선/점선으로 구분하여 시각화할 수 있습니다.
3. **수업 방식의 구체화 (Class Type)**
    - `Courses` 테이블에 `class_type` (Lecture, PBL, Field 등)을 추가하여, 학생들이 프로젝트형 수업인지 이론 수업인지 필터링할 수 있도록 설계했습니다.
4. **트랙 중심 로드맵 (Course_Tracks)**
    - `Course_Tracks` 테이블을 통해 특정 트랙(예: GI)을 선택했을 때 해당 트랙에 속한 과목들만 필터링하여 로드맵을 그릴 수 있는 기반을 마련했습니다.

[A Free Database Designer for Developers and Analysts](https://dbdiagram.io/d/69355ac83c4ea889c6d9f623)

https://dbdiagram.io/d/69355ac83c4ea889c6d9f623

---

## 5. SQL DDL (Data Definition Language)

### 5.1. 사용자 및 계정 테이블

#### USERS 테이블

```sql
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('ADMIN', 'PROFESSOR', 'STUDENT')),
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE users IS '시스템 사용자 계정 정보';
COMMENT ON COLUMN users.user_id IS '시스템 고유 ID (자동 증가)';
COMMENT ON COLUMN users.email IS '로그인 이메일 (중복 불가)';
COMMENT ON COLUMN users.password_hash IS 'Bcrypt로 암호화된 비밀번호';
COMMENT ON COLUMN users.role IS '사용자 권한 (ADMIN, PROFESSOR, STUDENT)';
COMMENT ON COLUMN users.is_active IS '계정 활성화 여부';
COMMENT ON COLUMN users.created_at IS '계정 생성 시각';
COMMENT ON COLUMN users.updated_at IS '최종 수정 시각';
```

#### PROFESSORS 테이블

```sql
CREATE TABLE professors (
    professor_id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL UNIQUE,
    name_ko VARCHAR(100) NOT NULL,
    name_en VARCHAR(100),
    research_areas TEXT,
    email VARCHAR(255) NOT NULL,
    office VARCHAR(100),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE professors IS '교수진 상세 정보';
COMMENT ON COLUMN professors.professor_id IS '교번 또는 교수 고유 ID';
COMMENT ON COLUMN professors.user_id IS 'USERS 테이블 참조 (1:1 관계)';
COMMENT ON COLUMN professors.name_ko IS '교수 이름 (한글)';
COMMENT ON COLUMN professors.name_en IS '교수 이름 (영문)';
COMMENT ON COLUMN professors.research_areas IS '연구 분야 (쉼표로 구분)';
COMMENT ON COLUMN professors.email IS '교수 이메일';
COMMENT ON COLUMN professors.office IS '연구실 위치';
```

#### STUDENTS 테이블

```sql
CREATE TABLE students (
    student_id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL UNIQUE,
    name VARCHAR(100) NOT NULL,
    major_id INTEGER NOT NULL,
    track_id INTEGER,
    grade_level INTEGER NOT NULL CHECK (grade_level BETWEEN 1 AND 4),
    enrollment_status VARCHAR(20) NOT NULL DEFAULT '재학' CHECK (enrollment_status IN ('재학', '휴학', '졸업', '자퇴')),
    credits INTEGER NOT NULL DEFAULT 0 CHECK (credits >= 0),
    gpa DECIMAL(3, 2) CHECK (gpa BETWEEN 0.00 AND 4.50),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE students IS '학생 상세 정보';
COMMENT ON COLUMN students.student_id IS '학번';
COMMENT ON COLUMN students.user_id IS 'USERS 테이블 참조 (1:1 관계)';
COMMENT ON COLUMN students.name IS '학생 이름';
COMMENT ON COLUMN students.major_id IS '주전공 ID (MAJORS 테이블 참조)';
COMMENT ON COLUMN students.track_id IS '주트랙 ID (TRACKS 테이블 참조)';
COMMENT ON COLUMN students.grade_level IS '학년 (1-4)';
COMMENT ON COLUMN students.enrollment_status IS '학적 상태 (재학, 휴학, 졸업, 자퇴)';
COMMENT ON COLUMN students.credits IS '총 이수 학점';
COMMENT ON COLUMN students.gpa IS '평점 (0.00-4.50)';
```

### 5.2. 학사 정보 기준 테이블

#### MAJORS 테이블

```sql
CREATE TABLE majors (
    major_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE,
    type VARCHAR(20) NOT NULL CHECK (type IN ('심화', '일반', '마이크로')),
    total_credits INTEGER NOT NULL CHECK (total_credits > 0),
    required_credits INTEGER NOT NULL CHECK (required_credits > 0),
    description TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT chk_credits CHECK (required_credits <= total_credits)
);

COMMENT ON TABLE majors IS '전공 정보 (심화, 일반, 마이크로디그리)';
COMMENT ON COLUMN majors.major_id IS '전공 고유 ID';
COMMENT ON COLUMN majors.name IS '전공명 (예: 디지털미디어, 디지털휴먼)';
COMMENT ON COLUMN majors.type IS '전공 구분 (심화, 일반, 마이크로)';
COMMENT ON COLUMN majors.total_credits IS '졸업 이수 학점';
COMMENT ON COLUMN majors.required_credits IS '필수 이수 학점';
COMMENT ON COLUMN majors.description IS '전공 설명';
```

#### TRACKS 테이블

```sql
CREATE TABLE tracks (
    track_id SERIAL PRIMARY KEY,
    initials VARCHAR(10) NOT NULL UNIQUE,
    name_ko VARCHAR(100) NOT NULL UNIQUE,
    name_en VARCHAR(100) NOT NULL UNIQUE,
    description TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE tracks IS '5대 트랙 정보';
COMMENT ON COLUMN tracks.track_id IS '트랙 고유 ID';
COMMENT ON COLUMN tracks.initials IS '트랙 이니셜 (GI, VC, DE, CD, MD)';
COMMENT ON COLUMN tracks.name_ko IS '트랙명 (한글)';
COMMENT ON COLUMN tracks.name_en IS '트랙명 (영문)';
COMMENT ON COLUMN tracks.description IS '트랙 설명';
```

### 5.3. 교과목 테이블

#### COURSES 테이블

```sql
CREATE TABLE courses (
    course_id SERIAL PRIMARY KEY,
    course_code VARCHAR(20) NOT NULL UNIQUE,
    name_ko VARCHAR(200) NOT NULL,
    name_en VARCHAR(200),
    credit INTEGER NOT NULL CHECK (credit BETWEEN 1 AND 4),
    class_type VARCHAR(20) NOT NULL CHECK (class_type IN ('Lecture', 'PBL', 'Field', 'Lab', 'Seminar')),
    grade_level INTEGER NOT NULL CHECK (grade_level BETWEEN 1 AND 4),
    semester INTEGER NOT NULL CHECK (semester IN (1, 2)),
    course_category VARCHAR(20) NOT NULL CHECK (course_category IN ('전필', '전선', '교필', '교선')),
    is_required BOOLEAN NOT NULL DEFAULT FALSE,
    description TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE courses IS '교과목 마스터 데이터';
COMMENT ON COLUMN courses.course_id IS '과목 고유 ID';
COMMENT ON COLUMN courses.course_code IS '학수번호 (예: CSE200)';
COMMENT ON COLUMN courses.name_ko IS '과목명 (한글)';
COMMENT ON COLUMN courses.name_en IS '과목명 (영문)';
COMMENT ON COLUMN courses.credit IS '학점 (1-4)';
COMMENT ON COLUMN courses.class_type IS '수업 방식 (Lecture, PBL, Field, Lab, Seminar)';
COMMENT ON COLUMN courses.grade_level IS '권장 학년 (1-4)';
COMMENT ON COLUMN courses.semester IS '개설 학기 (1: 1학기, 2: 2학기)';
COMMENT ON COLUMN courses.course_category IS '이수 구분 (전필, 전선, 교필, 교선)';
COMMENT ON COLUMN courses.is_required IS '필수 과목 여부';
COMMENT ON COLUMN courses.description IS '과목 설명';
```

### 5.4. 관계 매핑 테이블

#### COURSE_PROFESSORS 테이블

```sql
CREATE TABLE course_professors (
    course_id INTEGER NOT NULL,
    professor_id INTEGER NOT NULL,
    year INTEGER NOT NULL,
    semester INTEGER NOT NULL CHECK (semester IN (1, 2)),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (course_id, professor_id, year, semester)
);

COMMENT ON TABLE course_professors IS '과목-교수 매핑 (N:M 관계, 팀티칭 지원)';
COMMENT ON COLUMN course_professors.course_id IS '과목 ID (COURSES 참조)';
COMMENT ON COLUMN course_professors.professor_id IS '교수 ID (PROFESSORS 참조)';
COMMENT ON COLUMN course_professors.year IS '개설 연도';
COMMENT ON COLUMN course_professors.semester IS '개설 학기 (1 또는 2)';
```

#### COURSE_TRACKS 테이블

```sql
CREATE TABLE course_tracks (
    course_id INTEGER NOT NULL,
    track_id INTEGER NOT NULL,
    is_core BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (course_id, track_id)
);

COMMENT ON TABLE course_tracks IS '과목-트랙 매핑 (N:M 관계)';
COMMENT ON COLUMN course_tracks.course_id IS '과목 ID (COURSES 참조)';
COMMENT ON COLUMN course_tracks.track_id IS '트랙 ID (TRACKS 참조)';
COMMENT ON COLUMN course_tracks.is_core IS '트랙 핵심 과목 여부';
```

#### COURSE_MAJORS 테이블

```sql
CREATE TABLE course_majors (
    course_id INTEGER NOT NULL,
    major_id INTEGER NOT NULL,
    type VARCHAR(20) NOT NULL CHECK (type IN ('Required', 'Optional')),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (course_id, major_id)
);

COMMENT ON TABLE course_majors IS '과목-전공 매핑 (N:M 관계)';
COMMENT ON COLUMN course_majors.course_id IS '과목 ID (COURSES 참조)';
COMMENT ON COLUMN course_majors.major_id IS '전공 ID (MAJORS 참조)';
COMMENT ON COLUMN course_majors.type IS '이수 구분 (Required: 필수, Optional: 선택)';
```

#### COURSE_PREREQUISITES 테이블

```sql
CREATE TABLE course_prerequisites (
    course_id INTEGER NOT NULL,
    pre_course_id INTEGER NOT NULL,
    type VARCHAR(20) NOT NULL CHECK (type IN ('Required', 'Recommended')),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (course_id, pre_course_id),
    CONSTRAINT chk_no_self_reference CHECK (course_id != pre_course_id)
);

COMMENT ON TABLE course_prerequisites IS '선수과목 관계 (자기 참조 N:M)';
COMMENT ON COLUMN course_prerequisites.course_id IS '본 과목 ID (COURSES 참조)';
COMMENT ON COLUMN course_prerequisites.pre_course_id IS '선수 과목 ID (COURSES 참조)';
COMMENT ON COLUMN course_prerequisites.type IS '선수과목 유형 (Required: 필수, Recommended: 권장)';
```

### 5.5. 커리큘럼 및 프로젝트 테이블

#### CURRICULUMS 테이블

```sql
CREATE TABLE curriculums (
    curriculum_id VARCHAR(50) PRIMARY KEY,
    user_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    semesters JSONB NOT NULL,
    is_public BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE curriculums IS '사용자 커리큘럼 플랜';
COMMENT ON COLUMN curriculums.curriculum_id IS '커리큘럼 고유 ID';
COMMENT ON COLUMN curriculums.user_id IS '작성자 ID (USERS 참조)';
COMMENT ON COLUMN curriculums.title IS '커리큘럼 제목';
COMMENT ON COLUMN curriculums.description IS '커리큘럼 설명';
COMMENT ON COLUMN curriculums.semesters IS '학기별 과목 데이터 (JSON 형식)';
COMMENT ON COLUMN curriculums.is_public IS '공개 여부';
```

#### PROJECTS 테이블

```sql
CREATE TABLE projects (
    project_id VARCHAR(50) PRIMARY KEY,
    user_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    summary TEXT NOT NULL,
    content_markdown TEXT,
    track_type VARCHAR(10) NOT NULL CHECK (track_type IN ('GI', 'VC', 'CD', 'MD', 'DE')),
    tech_stacks JSONB,
    thumbnail_url VARCHAR(500),
    linked_course_id INTEGER,
    views INTEGER NOT NULL DEFAULT 0 CHECK (views >= 0),
    likes INTEGER NOT NULL DEFAULT 0 CHECK (likes >= 0),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE projects IS '학생 프로젝트 포트폴리오';
COMMENT ON COLUMN projects.project_id IS '프로젝트 고유 ID';
COMMENT ON COLUMN projects.user_id IS '작성자 ID (USERS 참조)';
COMMENT ON COLUMN projects.title IS '프로젝트 제목';
COMMENT ON COLUMN projects.summary IS '한 줄 소개';
COMMENT ON COLUMN projects.content_markdown IS '상세 내용 (Markdown 형식)';
COMMENT ON COLUMN projects.track_type IS '트랙 유형 (GI, VC, CD, MD, DE)';
COMMENT ON COLUMN projects.tech_stacks IS '기술 스택 (JSON 배열)';
COMMENT ON COLUMN projects.thumbnail_url IS '썸네일 이미지 URL';
COMMENT ON COLUMN projects.linked_course_id IS '연관 과목 ID (COURSES 참조)';
COMMENT ON COLUMN projects.views IS '조회수';
COMMENT ON COLUMN projects.likes IS '좋아요 수';
```

#### PROJECT_MEDIA 테이블

```sql
CREATE TABLE project_media (
    media_id SERIAL PRIMARY KEY,
    project_id VARCHAR(50) NOT NULL,
    type VARCHAR(20) NOT NULL CHECK (type IN ('image', 'video', 'document')),
    url VARCHAR(500) NOT NULL,
    caption TEXT,
    display_order INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE project_media IS '프로젝트 미디어 파일';
COMMENT ON COLUMN project_media.media_id IS '미디어 고유 ID';
COMMENT ON COLUMN project_media.project_id IS '프로젝트 ID (PROJECTS 참조)';
COMMENT ON COLUMN project_media.type IS '미디어 유형 (image, video, document)';
COMMENT ON COLUMN project_media.url IS '미디어 파일 URL';
COMMENT ON COLUMN project_media.caption IS '미디어 설명';
COMMENT ON COLUMN project_media.display_order IS '표시 순서';
```

#### PROJECT_TEAM_MEMBERS 테이블

```sql
CREATE TABLE project_team_members (
    project_id VARCHAR(50) NOT NULL,
    user_id INTEGER NOT NULL,
    role VARCHAR(100),
    is_verified BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (project_id, user_id)
);

COMMENT ON TABLE project_team_members IS '프로젝트 팀원 정보';
COMMENT ON COLUMN project_team_members.project_id IS '프로젝트 ID (PROJECTS 참조)';
COMMENT ON COLUMN project_team_members.user_id IS '팀원 ID (USERS 참조)';
COMMENT ON COLUMN project_team_members.role IS '팀원 역할 (예: Frontend Lead)';
COMMENT ON COLUMN project_team_members.is_verified IS '팀원 인증 여부';
```

#### PROJECT_LIKES 테이블

```sql
CREATE TABLE project_likes (
    project_id VARCHAR(50) NOT NULL,
    user_id INTEGER NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (project_id, user_id)
);

COMMENT ON TABLE project_likes IS '프로젝트 좋아요 기록';
COMMENT ON COLUMN project_likes.project_id IS '프로젝트 ID (PROJECTS 참조)';
COMMENT ON COLUMN project_likes.user_id IS '사용자 ID (USERS 참조)';
```

### 5.6. 팀 빌딩 테이블

#### TEAM_BUILDING_POSTS 테이블

```sql
CREATE TABLE team_building_posts (
    post_id VARCHAR(50) PRIMARY KEY,
    user_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    project_type VARCHAR(50) NOT NULL,
    required_skills JSONB,
    status VARCHAR(20) NOT NULL DEFAULT 'recruiting' CHECK (status IN ('recruiting', 'closed')),
    deadline DATE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE team_building_posts IS '팀 빌딩 모집 공고';
COMMENT ON COLUMN team_building_posts.post_id IS '공고 고유 ID';
COMMENT ON COLUMN team_building_posts.user_id IS '작성자 ID (USERS 참조)';
COMMENT ON COLUMN team_building_posts.title IS '공고 제목';
COMMENT ON COLUMN team_building_posts.description IS '공고 상세 내용';
COMMENT ON COLUMN team_building_posts.project_type IS '프로젝트 유형 (예: 졸업 작품)';
COMMENT ON COLUMN team_building_posts.required_skills IS '필요 기술 스택 (JSON 배열)';
COMMENT ON COLUMN team_building_posts.status IS '모집 상태 (recruiting, closed)';
COMMENT ON COLUMN team_building_posts.deadline IS '모집 마감일';
```

---

## 6. 외래키 제약조건 (Foreign Key Constraints)

### 6.1. 사용자 및 계정 관계

```sql
-- PROFESSORS 테이블 외래키
ALTER TABLE professors
    ADD CONSTRAINT fk_professors_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- STUDENTS 테이블 외래키
ALTER TABLE students
    ADD CONSTRAINT fk_students_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE students
    ADD CONSTRAINT fk_students_major
    FOREIGN KEY (major_id)
    REFERENCES majors(major_id)
    ON DELETE RESTRICT
    ON UPDATE CASCADE;

ALTER TABLE students
    ADD CONSTRAINT fk_students_track
    FOREIGN KEY (track_id)
    REFERENCES tracks(track_id)
    ON DELETE SET NULL
    ON UPDATE CASCADE;
```

**제약조건 설명**:
- `professors.user_id`: CASCADE - 사용자 계정 삭제 시 교수 정보도 함께 삭제
- `students.user_id`: CASCADE - 사용자 계정 삭제 시 학생 정보도 함께 삭제
- `students.major_id`: RESTRICT - 전공에 소속된 학생이 있으면 전공 삭제 불가
- `students.track_id`: SET NULL - 트랙 삭제 시 학생의 트랙 정보만 NULL로 설정

### 6.2. 교과목 관계 매핑

```sql
-- COURSE_PROFESSORS 테이블 외래키
ALTER TABLE course_professors
    ADD CONSTRAINT fk_course_professors_course
    FOREIGN KEY (course_id)
    REFERENCES courses(course_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE course_professors
    ADD CONSTRAINT fk_course_professors_professor
    FOREIGN KEY (professor_id)
    REFERENCES professors(professor_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- COURSE_TRACKS 테이블 외래키
ALTER TABLE course_tracks
    ADD CONSTRAINT fk_course_tracks_course
    FOREIGN KEY (course_id)
    REFERENCES courses(course_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE course_tracks
    ADD CONSTRAINT fk_course_tracks_track
    FOREIGN KEY (track_id)
    REFERENCES tracks(track_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- COURSE_MAJORS 테이블 외래키
ALTER TABLE course_majors
    ADD CONSTRAINT fk_course_majors_course
    FOREIGN KEY (course_id)
    REFERENCES courses(course_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE course_majors
    ADD CONSTRAINT fk_course_majors_major
    FOREIGN KEY (major_id)
    REFERENCES majors(major_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- COURSE_PREREQUISITES 테이블 외래키
ALTER TABLE course_prerequisites
    ADD CONSTRAINT fk_course_prerequisites_course
    FOREIGN KEY (course_id)
    REFERENCES courses(course_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE course_prerequisites
    ADD CONSTRAINT fk_course_prerequisites_pre_course
    FOREIGN KEY (pre_course_id)
    REFERENCES courses(course_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;
```

**제약조건 설명**:
- 모든 매핑 테이블: CASCADE - 과목, 교수, 트랙, 전공 삭제 시 관련 매핑 데이터도 함께 삭제
- 선수과목 관계: CASCADE - 과목 삭제 시 해당 과목의 선수과목 관계도 함께 삭제

### 6.3. 커리큘럼 및 프로젝트 관계

```sql
-- CURRICULUMS 테이블 외래키
ALTER TABLE curriculums
    ADD CONSTRAINT fk_curriculums_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- PROJECTS 테이블 외래키
ALTER TABLE projects
    ADD CONSTRAINT fk_projects_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE projects
    ADD CONSTRAINT fk_projects_course
    FOREIGN KEY (linked_course_id)
    REFERENCES courses(course_id)
    ON DELETE SET NULL
    ON UPDATE CASCADE;

-- PROJECT_MEDIA 테이블 외래키
ALTER TABLE project_media
    ADD CONSTRAINT fk_project_media_project
    FOREIGN KEY (project_id)
    REFERENCES projects(project_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- PROJECT_TEAM_MEMBERS 테이블 외래키
ALTER TABLE project_team_members
    ADD CONSTRAINT fk_project_team_members_project
    FOREIGN KEY (project_id)
    REFERENCES projects(project_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE project_team_members
    ADD CONSTRAINT fk_project_team_members_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

-- PROJECT_LIKES 테이블 외래키
ALTER TABLE project_likes
    ADD CONSTRAINT fk_project_likes_project
    FOREIGN KEY (project_id)
    REFERENCES projects(project_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE project_likes
    ADD CONSTRAINT fk_project_likes_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;
```

**제약조건 설명**:
- `curriculums.user_id`: CASCADE - 사용자 삭제 시 커리큘럼도 함께 삭제
- `projects.user_id`: CASCADE - 사용자 삭제 시 프로젝트도 함께 삭제
- `projects.linked_course_id`: SET NULL - 과목 삭제 시 프로젝트는 유지하되 연결만 해제
- `project_media`, `project_team_members`, `project_likes`: CASCADE - 프로젝트 삭제 시 관련 데이터 모두 삭제

### 6.4. 팀 빌딩 관계

```sql
-- TEAM_BUILDING_POSTS 테이블 외래키
ALTER TABLE team_building_posts
    ADD CONSTRAINT fk_team_building_posts_user
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE;
```

**제약조건 설명**:
- `team_building_posts.user_id`: CASCADE - 사용자 삭제 시 작성한 팀 빌딩 공고도 함께 삭제

### 6.5. 외래키 제약조건 요약

| 테이블 | 외래키 컬럼 | 참조 테이블 | ON DELETE | ON UPDATE | 설명 |
|--------|------------|------------|-----------|-----------|------|
| professors | user_id | users | CASCADE | CASCADE | 계정 삭제 시 교수 정보 삭제 |
| students | user_id | users | CASCADE | CASCADE | 계정 삭제 시 학생 정보 삭제 |
| students | major_id | majors | RESTRICT | CASCADE | 학생이 있는 전공 삭제 불가 |
| students | track_id | tracks | SET NULL | CASCADE | 트랙 삭제 시 NULL 설정 |
| course_professors | course_id | courses | CASCADE | CASCADE | 과목 삭제 시 매핑 삭제 |
| course_professors | professor_id | professors | CASCADE | CASCADE | 교수 삭제 시 매핑 삭제 |
| course_tracks | course_id | courses | CASCADE | CASCADE | 과목 삭제 시 매핑 삭제 |
| course_tracks | track_id | tracks | CASCADE | CASCADE | 트랙 삭제 시 매핑 삭제 |
| course_majors | course_id | courses | CASCADE | CASCADE | 과목 삭제 시 매핑 삭제 |
| course_majors | major_id | majors | CASCADE | CASCADE | 전공 삭제 시 매핑 삭제 |
| course_prerequisites | course_id | courses | CASCADE | CASCADE | 과목 삭제 시 선수과목 관계 삭제 |
| course_prerequisites | pre_course_id | courses | CASCADE | CASCADE | 선수과목 삭제 시 관계 삭제 |
| curriculums | user_id | users | CASCADE | CASCADE | 사용자 삭제 시 커리큘럼 삭제 |
| projects | user_id | users | CASCADE | CASCADE | 사용자 삭제 시 프로젝트 삭제 |
| projects | linked_course_id | courses | SET NULL | CASCADE | 과목 삭제 시 연결만 해제 |
| project_media | project_id | projects | CASCADE | CASCADE | 프로젝트 삭제 시 미디어 삭제 |
| project_team_members | project_id | projects | CASCADE | CASCADE | 프로젝트 삭제 시 팀원 정보 삭제 |
| project_team_members | user_id | users | CASCADE | CASCADE | 사용자 삭제 시 팀원 정보 삭제 |
| project_likes | project_id | projects | CASCADE | CASCADE | 프로젝트 삭제 시 좋아요 삭제 |
| project_likes | user_id | users | CASCADE | CASCADE | 사용자 삭제 시 좋아요 삭제 |
| team_building_posts | user_id | users | CASCADE | CASCADE | 사용자 삭제 시 공고 삭제 |

---

## 7. 인덱스 전략 (Index Strategy)

### 7.1. 사용자 및 계정 인덱스

```sql
-- USERS 테이블 인덱스
-- 이메일은 UNIQUE 제약조건으로 자동 인덱스 생성됨
-- 로그인 시 이메일 + 활성화 상태 조회 최적화
CREATE INDEX idx_users_email_active ON users(email, is_active);

-- 역할별 사용자 조회 최적화
CREATE INDEX idx_users_role ON users(role) WHERE is_active = TRUE;

-- PROFESSORS 테이블 인덱스
-- user_id는 UNIQUE 제약조건으로 자동 인덱스 생성됨
-- 이름 검색 최적화 (한글, 영문)
CREATE INDEX idx_professors_name_ko ON professors(name_ko);
CREATE INDEX idx_professors_name_en ON professors(name_en);

-- STUDENTS 테이블 인덱스
-- user_id는 UNIQUE 제약조건으로 자동 인덱스 생성됨
-- 전공별 학생 조회 최적화
CREATE INDEX idx_students_major ON students(major_id);

-- 트랙별 학생 조회 최적화
CREATE INDEX idx_students_track ON students(track_id);

-- 학년별 학생 조회 최적화
CREATE INDEX idx_students_grade ON students(grade_level);

-- 전공 + 트랙 + 학년 복합 조회 최적화 (커버링 인덱스)
CREATE INDEX idx_students_major_track_grade ON students(major_id, track_id, grade_level)
    INCLUDE (name, credits, gpa);

-- 학적 상태별 조회 최적화
CREATE INDEX idx_students_enrollment_status ON students(enrollment_status);
```

**인덱스 설명**:
- `idx_users_email_active`: 로그인 시 이메일과 활성화 상태를 동시에 확인
- `idx_users_role`: 역할별 사용자 목록 조회 (활성 사용자만)
- `idx_students_major_track_grade`: 전공, 트랙, 학년으로 학생 검색 시 자주 사용되는 컬럼 포함

### 7.2. 학사 정보 인덱스

```sql
-- MAJORS 테이블 인덱스
-- name은 UNIQUE 제약조건으로 자동 인덱스 생성됨
-- 전공 유형별 조회 최적화
CREATE INDEX idx_majors_type ON majors(type);

-- TRACKS 테이블 인덱스
-- initials, name_ko, name_en은 UNIQUE 제약조건으로 자동 인덱스 생성됨
```

### 7.3. 교과목 인덱스

```sql
-- COURSES 테이블 인덱스
-- course_code는 UNIQUE 제약조건으로 자동 인덱스 생성됨

-- 학년 + 학기별 과목 조회 최적화
CREATE INDEX idx_courses_grade_semester ON courses(grade_level, semester);

-- 과목 유형별 조회 최적화
CREATE INDEX idx_courses_class_type ON courses(class_type);

-- 이수 구분별 조회 최적화
CREATE INDEX idx_courses_category ON courses(course_category);

-- 필수 과목 조회 최적화
CREATE INDEX idx_courses_required ON courses(is_required) WHERE is_required = TRUE;

-- 과목명 검색 최적화 (한글)
CREATE INDEX idx_courses_name_ko_trgm ON courses USING gin(name_ko gin_trgm_ops);

-- 학년 + 학기 + 이수구분 복합 조회 최적화 (커버링 인덱스)
CREATE INDEX idx_courses_grade_semester_category ON courses(grade_level, semester, course_category)
    INCLUDE (course_code, name_ko, credit);
```

**인덱스 설명**:
- `idx_courses_grade_semester`: 학년별, 학기별 과목 목록 조회
- `idx_courses_name_ko_trgm`: 과목명 부분 검색 (GIN 인덱스, pg_trgm 확장 필요)
- `idx_courses_grade_semester_category`: 학년, 학기, 이수구분으로 필터링 시 자주 조회되는 컬럼 포함

### 7.4. 관계 매핑 인덱스

```sql
-- COURSE_PROFESSORS 테이블 인덱스
-- (course_id, professor_id, year, semester)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 교수별 담당 과목 조회 최적화
CREATE INDEX idx_course_professors_professor ON course_professors(professor_id, year, semester);

-- 연도 + 학기별 과목 조회 최적화
CREATE INDEX idx_course_professors_year_semester ON course_professors(year, semester);

-- COURSE_TRACKS 테이블 인덱스
-- (course_id, track_id)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 트랙별 과목 조회 최적화
CREATE INDEX idx_course_tracks_track ON course_tracks(track_id);

-- 트랙 핵심 과목 조회 최적화
CREATE INDEX idx_course_tracks_core ON course_tracks(track_id, is_core) WHERE is_core = TRUE;

-- COURSE_MAJORS 테이블 인덱스
-- (course_id, major_id)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 전공별 과목 조회 최적화
CREATE INDEX idx_course_majors_major ON course_majors(major_id);

-- 전공 필수 과목 조회 최적화
CREATE INDEX idx_course_majors_required ON course_majors(major_id, type) WHERE type = 'Required';

-- COURSE_PREREQUISITES 테이블 인덱스
-- (course_id, pre_course_id)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 선수과목 조회 최적화 (역방향)
CREATE INDEX idx_course_prerequisites_pre_course ON course_prerequisites(pre_course_id);

-- 필수 선수과목 조회 최적화
CREATE INDEX idx_course_prerequisites_required ON course_prerequisites(course_id, type) WHERE type = 'Required';
```

**인덱스 설명**:
- `idx_course_professors_professor`: 특정 교수가 담당하는 과목 목록 조회
- `idx_course_tracks_core`: 트랙별 핵심 과목만 필터링
- `idx_course_prerequisites_pre_course`: 특정 과목이 어떤 과목의 선수과목인지 역방향 조회

### 7.5. 커리큘럼 및 프로젝트 인덱스

```sql
-- CURRICULUMS 테이블 인덱스
-- 사용자별 커리큘럼 조회 최적화
CREATE INDEX idx_curriculums_user ON curriculums(user_id);

-- 공개 커리큘럼 조회 최적화
CREATE INDEX idx_curriculums_public ON curriculums(is_public, created_at DESC) WHERE is_public = TRUE;

-- 최근 수정된 커리큘럼 조회 최적화
CREATE INDEX idx_curriculums_updated ON curriculums(updated_at DESC);

-- PROJECTS 테이블 인덱스
-- 사용자별 프로젝트 조회 최적화
CREATE INDEX idx_projects_user ON projects(user_id);

-- 트랙별 프로젝트 조회 최적화
CREATE INDEX idx_projects_track ON projects(track_type);

-- 연관 과목별 프로젝트 조회 최적화
CREATE INDEX idx_projects_course ON projects(linked_course_id) WHERE linked_course_id IS NOT NULL;

-- 최신순 프로젝트 조회 최적화
CREATE INDEX idx_projects_created ON projects(created_at DESC);

-- 인기순 프로젝트 조회 최적화 (조회수)
CREATE INDEX idx_projects_views ON projects(views DESC);

-- 인기순 프로젝트 조회 최적화 (좋아요)
CREATE INDEX idx_projects_likes ON projects(likes DESC);

-- 트랙 + 정렬 복합 조회 최적화
CREATE INDEX idx_projects_track_created ON projects(track_type, created_at DESC);
CREATE INDEX idx_projects_track_views ON projects(track_type, views DESC);

-- 기술 스택 검색 최적화 (GIN 인덱스)
CREATE INDEX idx_projects_tech_stacks ON projects USING gin(tech_stacks);

-- 프로젝트 제목 검색 최적화
CREATE INDEX idx_projects_title_trgm ON projects USING gin(title gin_trgm_ops);

-- PROJECT_MEDIA 테이블 인덱스
-- 프로젝트별 미디어 조회 최적화
CREATE INDEX idx_project_media_project ON project_media(project_id, display_order);

-- PROJECT_TEAM_MEMBERS 테이블 인덱스
-- (project_id, user_id)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 사용자별 참여 프로젝트 조회 최적화
CREATE INDEX idx_project_team_members_user ON project_team_members(user_id);

-- 인증된 팀원 조회 최적화
CREATE INDEX idx_project_team_members_verified ON project_team_members(project_id, is_verified) WHERE is_verified = TRUE;

-- PROJECT_LIKES 테이블 인덱스
-- (project_id, user_id)는 PRIMARY KEY로 자동 인덱스 생성됨
-- 사용자별 좋아요한 프로젝트 조회 최적화
CREATE INDEX idx_project_likes_user ON project_likes(user_id);

-- 최근 좋아요 조회 최적화
CREATE INDEX idx_project_likes_created ON project_likes(created_at DESC);
```

**인덱스 설명**:
- `idx_projects_tech_stacks`: JSONB 컬럼에 GIN 인덱스 적용하여 기술 스택 검색 최적화
- `idx_projects_title_trgm`: 프로젝트 제목 부분 검색 (pg_trgm 확장 필요)
- `idx_projects_track_created`, `idx_projects_track_views`: 트랙별 필터링 + 정렬 동시 최적화

### 7.6. 팀 빌딩 인덱스

```sql
-- TEAM_BUILDING_POSTS 테이블 인덱스
-- 사용자별 공고 조회 최적화
CREATE INDEX idx_team_building_posts_user ON team_building_posts(user_id);

-- 모집 상태별 조회 최적화
CREATE INDEX idx_team_building_posts_status ON team_building_posts(status, created_at DESC);

-- 마감일 기준 조회 최적화
CREATE INDEX idx_team_building_posts_deadline ON team_building_posts(deadline) WHERE status = 'recruiting';

-- 필요 기술 스택 검색 최적화 (GIN 인덱스)
CREATE INDEX idx_team_building_posts_skills ON team_building_posts USING gin(required_skills);

-- 최신순 공고 조회 최적화
CREATE INDEX idx_team_building_posts_created ON team_building_posts(created_at DESC);
```

**인덱스 설명**:
- `idx_team_building_posts_status`: 모집 중인 공고를 최신순으로 조회
- `idx_team_building_posts_deadline`: 모집 중인 공고의 마감일 기준 정렬
- `idx_team_building_posts_skills`: JSONB 컬럼에 GIN 인덱스 적용하여 기술 스택 검색 최적화

### 7.7. 인덱스 전략 요약

#### 단일 인덱스 (Single Column Index)

| 테이블 | 인덱스명 | 컬럼 | 목적 |
|--------|---------|------|------|
| users | idx_users_role | role | 역할별 사용자 조회 |
| students | idx_students_major | major_id | 전공별 학생 조회 |
| students | idx_students_track | track_id | 트랙별 학생 조회 |
| students | idx_students_grade | grade_level | 학년별 학생 조회 |
| courses | idx_courses_class_type | class_type | 수업 유형별 조회 |
| courses | idx_courses_category | course_category | 이수 구분별 조회 |
| projects | idx_projects_track | track_type | 트랙별 프로젝트 조회 |

#### 복합 인덱스 (Composite Index)

| 테이블 | 인덱스명 | 컬럼 | 목적 |
|--------|---------|------|------|
| users | idx_users_email_active | email, is_active | 로그인 최적화 |
| students | idx_students_major_track_grade | major_id, track_id, grade_level | 다중 필터 조회 |
| courses | idx_courses_grade_semester | grade_level, semester | 학년+학기 조회 |
| courses | idx_courses_grade_semester_category | grade_level, semester, course_category | 다중 필터 조회 |
| projects | idx_projects_track_created | track_type, created_at DESC | 트랙별 최신순 조회 |
| projects | idx_projects_track_views | track_type, views DESC | 트랙별 인기순 조회 |

#### 유니크 인덱스 (Unique Index)

유니크 제약조건으로 자동 생성되는 인덱스:
- `users.email`
- `professors.user_id`
- `students.user_id`
- `majors.name`
- `tracks.initials`, `tracks.name_ko`, `tracks.name_en`
- `courses.course_code`

#### 커버링 인덱스 (Covering Index)

INCLUDE 절을 사용하여 자주 조회되는 컬럼을 인덱스에 포함:
- `idx_students_major_track_grade`: name, credits, gpa 포함
- `idx_courses_grade_semester_category`: course_code, name_ko, credit 포함

#### GIN 인덱스 (Generalized Inverted Index)

JSONB 컬럼 및 전문 검색 최적화:
- `idx_courses_name_ko_trgm`: 과목명 부분 검색
- `idx_projects_tech_stacks`: 기술 스택 검색
- `idx_projects_title_trgm`: 프로젝트 제목 부분 검색
- `idx_team_building_posts_skills`: 필요 기술 검색

#### 부분 인덱스 (Partial Index)

WHERE 절을 사용하여 특정 조건의 데이터만 인덱싱:
- `idx_users_role`: 활성 사용자만
- `idx_courses_required`: 필수 과목만
- `idx_course_tracks_core`: 핵심 과목만
- `idx_course_majors_required`: 전공 필수 과목만
- `idx_course_prerequisites_required`: 필수 선수과목만
- `idx_curriculums_public`: 공개 커리큘럼만
- `idx_projects_course`: 과목 연결된 프로젝트만
- `idx_project_team_members_verified`: 인증된 팀원만
- `idx_team_building_posts_deadline`: 모집 중인 공고만

### 7.8. 예상 쿼리 패턴 및 최적화

#### 쿼리 패턴 1: 트랙별 로드맵 조회

```sql
-- 쿼리
SELECT c.course_id, c.course_code, c.name_ko, c.credit, c.grade_level
FROM courses c
JOIN course_tracks ct ON c.course_id = ct.course_id
WHERE ct.track_id = 1
  AND c.grade_level = 2
  AND c.semester = 1
ORDER BY c.course_code;

-- 최적화 인덱스
-- idx_course_tracks_track (course_tracks.track_id)
-- idx_courses_grade_semester_category (courses.grade_level, semester, course_category)
```

#### 쿼리 패턴 2: 프로젝트 목록 조회 (필터 + 정렬)

```sql
-- 쿼리
SELECT project_id, title, summary, thumbnail_url, views, likes
FROM projects
WHERE track_type = 'GI'
  AND tech_stacks @> '["React"]'
ORDER BY views DESC
LIMIT 20 OFFSET 0;

-- 최적화 인덱스
-- idx_projects_track_views (projects.track_type, views DESC)
-- idx_projects_tech_stacks (projects.tech_stacks GIN)
```

#### 쿼리 패턴 3: 학생 커리큘럼 추천

```sql
-- 쿼리
SELECT s.student_id, s.name, s.major_id, s.track_id, s.grade_level
FROM students s
WHERE s.major_id = 1
  AND s.track_id = 3
  AND s.grade_level = 2
  AND s.enrollment_status = '재학';

-- 최적화 인덱스
-- idx_students_major_track_grade (students.major_id, track_id, grade_level)
```

#### 쿼리 패턴 4: 선수과목 체크

```sql
-- 쿼리
SELECT cp.pre_course_id, c.name_ko, cp.type
FROM course_prerequisites cp
JOIN courses c ON cp.pre_course_id = c.course_id
WHERE cp.course_id = 201
  AND cp.type = 'Required';

-- 최적화 인덱스
-- idx_course_prerequisites_required (course_prerequisites.course_id, type)
```

### 7.9. 인덱스 유지보수 가이드

#### 인덱스 모니터링

```sql
-- 사용되지 않는 인덱스 확인
SELECT schemaname, tablename, indexname, idx_scan
FROM pg_stat_user_indexes
WHERE idx_scan = 0
  AND indexrelname NOT LIKE '%_pkey';

-- 인덱스 크기 확인
SELECT schemaname, tablename, indexname,
       pg_size_pretty(pg_relation_size(indexrelid)) AS index_size
FROM pg_stat_user_indexes
ORDER BY pg_relation_size(indexrelid) DESC;

-- 인덱스 사용 통계
SELECT schemaname, tablename, indexname, idx_scan, idx_tup_read, idx_tup_fetch
FROM pg_stat_user_indexes
ORDER BY idx_scan DESC;
```

#### 인덱스 재구축

```sql
-- 인덱스 재구축 (CONCURRENTLY 옵션으로 서비스 중단 없이 실행)
REINDEX INDEX CONCURRENTLY idx_projects_track_created;

-- 테이블 전체 인덱스 재구축
REINDEX TABLE CONCURRENTLY projects;
```

#### 필수 확장 설치

```sql
-- pg_trgm 확장 설치 (부분 문자열 검색용)
CREATE EXTENSION IF NOT EXISTS pg_trgm;

-- btree_gin 확장 설치 (GIN 인덱스 최적화)
CREATE EXTENSION IF NOT EXISTS btree_gin;
```

---

## 8. 시드 데이터 (Seed Data)

### 8.1. 트랙 초기 데이터

```sql
-- 5대 트랙 데이터 삽입
INSERT INTO tracks (track_id, initials, name_ko, name_en, description) VALUES
(1, 'GI', '게임앤인터랙티브콘텐츠', 'Game & Interactive Contents', '게임 및 인터랙티브 미디어 제작 전문 트랙'),
(2, 'VC', '영상콘텐츠', 'Visual Contents', '영화, 드라마, 광고 등 영상 콘텐츠 제작 전문 트랙'),
(3, 'DE', '디지털엔터테인먼트', 'Digital Entertainment', '디지털 엔터테인먼트 기획 및 제작 전문 트랙'),
(4, 'CD', '콘텐츠디자인', 'Contents Design', 'UX/UI 및 콘텐츠 디자인 전문 트랙'),
(5, 'MD', '미디어아트', 'Media Art', '미디어 아트 및 실험적 콘텐츠 제작 전문 트랙');
```

### 8.2. 전공 초기 데이터

```sql
-- 전공 데이터 삽입
INSERT INTO majors (major_id, name, type, total_credits, required_credits, description) VALUES
(1, '디지털미디어', '심화', 130, 66, '디지털 미디어 콘텐츠 제작 및 기술 전문 심화 전공'),
(2, '디지털미디어', '일반', 130, 45, '디지털 미디어 기초 및 응용 일반 전공'),
(3, '디지털휴먼', '마이크로', 21, 21, 'AI 기반 디지털 휴먼 제작 마이크로디그리');
```

### 8.3. 교과목 초기 데이터

```sql
-- 1학년 1학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('CSE101', '프로그래밍기초', 'Introduction to Programming', 3, 'Lecture', 1, 1, '전필', TRUE, 'Python 기반 프로그래밍 기초'),
('DM101', '디지털미디어개론', 'Introduction to Digital Media', 3, 'Lecture', 1, 1, '전필', TRUE, '디지털 미디어의 기본 개념 및 역사'),
('DM102', '디자인씽킹', 'Design Thinking', 3, 'PBL', 1, 1, '전필', TRUE, '문제 해결을 위한 디자인 사고 방법론'),
('ART101', '드로잉기초', 'Basic Drawing', 2, 'Lab', 1, 1, '전선', FALSE, '기초 드로잉 및 스케치 기법');

-- 1학년 2학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('CSE102', '자료구조', 'Data Structures', 3, 'Lecture', 1, 2, '전필', TRUE, '기본 자료구조 및 알고리즘'),
('DM103', '디지털이미지처리', 'Digital Image Processing', 3, 'Lab', 1, 2, '전필', TRUE, 'Photoshop 기반 이미지 편집 및 처리'),
('DM104', '영상제작기초', 'Basic Video Production', 3, 'Lab', 1, 2, '전선', FALSE, '영상 촬영 및 편집 기초'),
('DM105', '3D모델링기초', 'Basic 3D Modeling', 3, 'Lab', 1, 2, '전선', FALSE, 'Blender 기반 3D 모델링 입문');

-- 2학년 1학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('CSE201', '웹프로그래밍', 'Web Programming', 3, 'Lecture', 2, 1, '전필', TRUE, 'HTML, CSS, JavaScript 기반 웹 개발'),
('DM201', '게임엔진프로그래밍', 'Game Engine Programming', 3, 'Lab', 2, 1, '전선', FALSE, 'Unity 기반 게임 개발'),
('DM202', '인터랙션디자인', 'Interaction Design', 3, 'PBL', 2, 1, '전선', FALSE, '사용자 인터랙션 설계 및 프로토타이핑'),
('DM203', '영상편집', 'Video Editing', 3, 'Lab', 2, 1, '전선', FALSE, 'Premiere Pro 기반 영상 편집');

-- 2학년 2학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('CSE202', '데이터베이스', 'Database Systems', 3, 'Lecture', 2, 2, '전필', TRUE, '관계형 데이터베이스 설계 및 SQL'),
('DM204', '모바일앱개발', 'Mobile App Development', 3, 'Lab', 2, 2, '전선', FALSE, 'React Native 기반 모바일 앱 개발'),
('DM205', '3D애니메이션', '3D Animation', 3, 'Lab', 2, 2, '전선', FALSE, 'Maya 기반 3D 애니메이션 제작'),
('DM206', 'UX/UI디자인', 'UX/UI Design', 3, 'PBL', 2, 2, '전선', FALSE, 'Figma 기반 UX/UI 설계');

-- 3학년 1학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('DM301', '게임디자인', 'Game Design', 3, 'PBL', 3, 1, '전선', FALSE, '게임 메커닉 및 레벨 디자인'),
('DM302', 'VR/AR콘텐츠제작', 'VR/AR Contents Production', 3, 'Lab', 3, 1, '전선', FALSE, 'Unity 기반 VR/AR 콘텐츠 개발'),
('DM303', '영상특수효과', 'Visual Effects', 3, 'Lab', 3, 1, '전선', FALSE, 'After Effects 기반 VFX 제작'),
('DM304', '인공지능기초', 'Introduction to AI', 3, 'Lecture', 3, 1, '전선', FALSE, '머신러닝 및 딥러닝 기초');

-- 3학년 2학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('DM305', '몰입형미디어프로그래밍', 'Immersive Media Programming', 3, 'PBL', 3, 2, '전선', FALSE, 'VR/AR 고급 프로그래밍'),
('DM306', '컴퓨터그래픽스', 'Computer Graphics', 3, 'Lecture', 3, 2, '전선', FALSE, '3D 그래픽스 이론 및 렌더링'),
('DM307', '사운드디자인', 'Sound Design', 3, 'Lab', 3, 2, '전선', FALSE, '게임 및 영상 사운드 제작'),
('DM308', '디지털휴먼제작', 'Digital Human Production', 3, 'Lab', 3, 2, '전선', FALSE, 'AI 기반 디지털 휴먼 모델링');

-- 4학년 1학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('DM401', '캡스톤디자인1', 'Capstone Design 1', 3, 'PBL', 4, 1, '전필', TRUE, '졸업 작품 기획 및 프로토타입 제작'),
('DM402', '포트폴리오제작', 'Portfolio Production', 2, 'Seminar', 4, 1, '전선', FALSE, '취업용 포트폴리오 제작 및 발표'),
('DM403', '게임프로젝트', 'Game Project', 3, 'PBL', 4, 1, '전선', FALSE, '팀 기반 게임 프로젝트'),
('DM404', '영상프로젝트', 'Video Project', 3, 'PBL', 4, 1, '전선', FALSE, '팀 기반 영상 프로젝트');

-- 4학년 2학기 과목
INSERT INTO courses (course_code, name_ko, name_en, credit, class_type, grade_level, semester, course_category, is_required, description) VALUES
('DM405', '캡스톤디자인2', 'Capstone Design 2', 3, 'PBL', 4, 2, '전필', TRUE, '졸업 작품 완성 및 전시'),
('DM406', '인턴십', 'Internship', 3, 'Field', 4, 2, '전선', FALSE, '산업체 현장 실습'),
('DM407', '창업실습', 'Startup Practice', 3, 'PBL', 4, 2, '전선', FALSE, '스타트업 창업 실습'),
('DM408', '미디어아트프로젝트', 'Media Art Project', 3, 'PBL', 4, 2, '전선', FALSE, '실험적 미디어 아트 제작');
```

### 8.4. 과목-트랙 매핑 데이터

```sql
-- GI 트랙 (게임앤인터랙티브콘텐츠) 과목 매핑
INSERT INTO course_tracks (course_id, track_id, is_core) VALUES
((SELECT course_id FROM courses WHERE course_code = 'CSE101'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'CSE102'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'CSE201'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM201'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM301'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM302'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM305'), 1, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM403'), 1, TRUE);

-- VC 트랙 (영상콘텐츠) 과목 매핑
INSERT INTO course_tracks (course_id, track_id, is_core) VALUES
((SELECT course_id FROM courses WHERE course_code = 'DM103'), 2, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM104'), 2, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM203'), 2, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM303'), 2, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM404'), 2, TRUE);

-- CD 트랙 (콘텐츠디자인) 과목 매핑
INSERT INTO course_tracks (course_id, track_id, is_core) VALUES
((SELECT course_id FROM courses WHERE course_code = 'DM102'), 4, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM202'), 4, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM206'), 4, TRUE),
((SELECT course_id FROM courses WHERE course_code = 'DM402'), 4, TRUE);
```

### 8.5. 선수과목 관계 데이터

```sql
-- 선수과목 관계 삽입
INSERT INTO course_prerequisites (course_id, pre_course_id, type) VALUES
-- 자료구조의 선수과목: 프로그래밍기초 (필수)
((SELECT course_id FROM courses WHERE course_code = 'CSE102'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE101'), 'Required'),

-- 웹프로그래밍의 선수과목: 프로그래밍기초 (필수)
((SELECT course_id FROM courses WHERE course_code = 'CSE201'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE101'), 'Required'),

-- 게임엔진프로그래밍의 선수과목: 프로그래밍기초 (필수), 자료구조 (권장)
((SELECT course_id FROM courses WHERE course_code = 'DM201'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE101'), 'Required'),
((SELECT course_id FROM courses WHERE course_code = 'DM201'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE102'), 'Recommended'),

-- 데이터베이스의 선수과목: 자료구조 (필수)
((SELECT course_id FROM courses WHERE course_code = 'CSE202'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE102'), 'Required'),

-- 모바일앱개발의 선수과목: 웹프로그래밍 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM204'), 
 (SELECT course_id FROM courses WHERE course_code = 'CSE201'), 'Required'),

-- VR/AR콘텐츠제작의 선수과목: 게임엔진프로그래밍 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM302'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM201'), 'Required'),

-- 몰입형미디어프로그래밍의 선수과목: VR/AR콘텐츠제작 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM305'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM302'), 'Required'),

-- 3D애니메이션의 선수과목: 3D모델링기초 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM205'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM105'), 'Required'),

-- 영상편집의 선수과목: 영상제작기초 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM203'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM104'), 'Required'),

-- 영상특수효과의 선수과목: 영상편집 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM303'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM203'), 'Required'),

-- 캡스톤디자인2의 선수과목: 캡스톤디자인1 (필수)
((SELECT course_id FROM courses WHERE course_code = 'DM405'), 
 (SELECT course_id FROM courses WHERE course_code = 'DM401'), 'Required');
```

### 8.6. 테스트 사용자 데이터

```sql
-- 관리자 계정
INSERT INTO users (email, password_hash, role, is_active) VALUES
('admin@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'ADMIN', TRUE);

-- 교수 계정
INSERT INTO users (email, password_hash, role, is_active) VALUES
('prof.kim@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'PROFESSOR', TRUE),
('prof.lee@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'PROFESSOR', TRUE);

-- 교수 상세 정보
INSERT INTO professors (professor_id, user_id, name_ko, name_en, research_areas, email, office) VALUES
(10001, (SELECT user_id FROM users WHERE email = 'prof.kim@ajou.ac.kr'), 
 '김교수', 'Kim Professor', '게임 개발, 인공지능', 'prof.kim@ajou.ac.kr', '팔달관 501호'),
(10002, (SELECT user_id FROM users WHERE email = 'prof.lee@ajou.ac.kr'), 
 '이교수', 'Lee Professor', '영상 제작, VFX', 'prof.lee@ajou.ac.kr', '팔달관 502호');

-- 학생 계정
INSERT INTO users (email, password_hash, role, is_active) VALUES
('student1@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'STUDENT', TRUE),
('student2@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'STUDENT', TRUE),
('student3@ajou.ac.kr', '$2b$10$abcdefghijklmnopqrstuvwxyz1234567890', 'STUDENT', TRUE);

-- 학생 상세 정보
INSERT INTO students (student_id, user_id, name, major_id, track_id, grade_level, enrollment_status, credits, gpa) VALUES
(202221001, (SELECT user_id FROM users WHERE email = 'student1@ajou.ac.kr'), 
 '홍길동', 1, 1, 3, '재학', 72, 3.85),
(202221002, (SELECT user_id FROM users WHERE email = 'student2@ajou.ac.kr'), 
 '김영희', 1, 2, 2, '재학', 45, 4.12),
(202221003, (SELECT user_id FROM users WHERE email = 'student3@ajou.ac.kr'), 
 '이철수', 1, 4, 4, '재학', 110, 3.67);
```

### 8.7. 테스트 프로젝트 데이터

```sql
-- 샘플 프로젝트
INSERT INTO projects (project_id, user_id, title, summary, content_markdown, track_type, tech_stacks, thumbnail_url, views, likes) VALUES
('proj-001', 
 (SELECT user_id FROM users WHERE email = 'student1@ajou.ac.kr'),
 'Media Weave Platform',
 '학과 커뮤니티 및 포트폴리오 플랫폼',
 '# Media Weave Platform\n\n디지털미디어학과 학생들을 위한 통합 플랫폼입니다.',
 'GI',
 '["React", "Node.js", "PostgreSQL", "TypeScript"]'::jsonb,
 'https://example.com/thumbnail1.jpg',
 1250,
 142);

INSERT INTO projects (project_id, user_id, title, summary, content_markdown, track_type, tech_stacks, thumbnail_url, views, likes) VALUES
('proj-002', 
 (SELECT user_id FROM users WHERE email = 'student2@ajou.ac.kr'),
 '단편 영화: 디지털 드림',
 'SF 장르의 단편 영화 작품',
 '# 단편 영화: 디지털 드림\n\n미래 사회를 배경으로 한 SF 단편 영화입니다.',
 'VC',
 '["Premiere Pro", "After Effects", "DaVinci Resolve"]'::jsonb,
 'https://example.com/thumbnail2.jpg',
 890,
 76);
```

### 8.8. 시드 데이터 실행 순서

데이터베이스 초기화 시 다음 순서로 SQL을 실행:

1. **확장 설치**
```sql
CREATE EXTENSION IF NOT EXISTS pg_trgm;
CREATE EXTENSION IF NOT EXISTS btree_gin;
```

2. **테이블 생성** (섹션 5의 DDL 순서대로)
   - users
   - professors, students
   - majors, tracks
   - courses
   - 매핑 테이블 (course_professors, course_tracks, course_majors, course_prerequisites)
   - curriculums, projects, project_media, project_team_members, project_likes
   - team_building_posts

3. **외래키 제약조건 추가** (섹션 6)

4. **인덱스 생성** (섹션 7)

5. **시드 데이터 삽입** (섹션 8)
   - tracks
   - majors
   - courses
   - course_tracks
   - course_prerequisites
   - users (admin, professors, students)
   - professors, students
   - projects (테스트 데이터)

### 8.9. 전체 초기화 스크립트

```sql
-- 데이터베이스 초기화 (주의: 모든 데이터 삭제)
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public;

-- 확장 설치
CREATE EXTENSION IF NOT EXISTS pg_trgm;
CREATE EXTENSION IF NOT EXISTS btree_gin;

-- 이후 섹션 5, 6, 7, 8의 SQL을 순서대로 실행
```

---

## 9. 데이터베이스 마이그레이션 가이드

### 9.1. 개발 환경 설정

```bash
# PostgreSQL 설치 확인
psql --version

# 데이터베이스 생성
createdb mediaweave_dev

# 초기화 스크립트 실행
psql -d mediaweave_dev -f init_schema.sql
psql -d mediaweave_dev -f init_seed_data.sql
```

### 9.2. 마이그레이션 도구 (Node.js 예시)

```javascript
// migrations/001_create_tables.js
exports.up = async (knex) => {
  // 테이블 생성 로직
};

exports.down = async (knex) => {
  // 롤백 로직
};
```

### 9.3. 백업 및 복구

```bash
# 백업
pg_dump -U postgres -d mediaweave_dev -F c -f backup.dump

# 복구
pg_restore -U postgres -d mediaweave_dev -c backup.dump
```

---

## 10. 성능 최적화 체크리스트

- [ ] 모든 외래키에 인덱스 생성 완료
- [ ] 자주 조회되는 컬럼에 단일 인덱스 생성
- [ ] 복합 조회 쿼리에 복합 인덱스 생성
- [ ] JSONB 컬럼에 GIN 인덱스 생성
- [ ] 부분 인덱스로 불필요한 데이터 제외
- [ ] 커버링 인덱스로 인덱스 온리 스캔 활용
- [ ] EXPLAIN ANALYZE로 쿼리 성능 분석
- [ ] 사용되지 않는 인덱스 정기 점검
- [ ] 인덱스 크기 모니터링
- [ ] 정기적인 VACUUM 및 ANALYZE 실행